<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.46">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Define Constant | Pixel Builder</title><meta name="description" content="Modern Framework to build HTML5 games">
    <link rel="modulepreload" href="/pixel-builder/assets/app.860be1bc.js"><link rel="modulepreload" href="/pixel-builder/assets/define.html.82cb2a8a.js"><link rel="modulepreload" href="/pixel-builder/assets/define.html.f3ffe748.js"><link rel="prefetch" href="/pixel-builder/assets/getting-started.html.1d66ddaf.js"><link rel="prefetch" href="/pixel-builder/assets/index.html.3d4c2afb.js"><link rel="prefetch" href="/pixel-builder/assets/github.html.c75fa409.js"><link rel="prefetch" href="/pixel-builder/assets/vscode.html.aae65114.js"><link rel="prefetch" href="/pixel-builder/assets/babylonjs.html.7a930312.js"><link rel="prefetch" href="/pixel-builder/assets/minimalist.html.cfb9df31.js"><link rel="prefetch" href="/pixel-builder/assets/pixijs.html.ce39ab78.js"><link rel="prefetch" href="/pixel-builder/assets/assets.html.92b39f61.js"><link rel="prefetch" href="/pixel-builder/assets/building.html.297add08.js"><link rel="prefetch" href="/pixel-builder/assets/cli.html.3d3f43f6.js"><link rel="prefetch" href="/pixel-builder/assets/structure.html.6797a278.js"><link rel="prefetch" href="/pixel-builder/assets/styling.html.072d21ae.js"><link rel="prefetch" href="/pixel-builder/assets/404.html.d9e81f5c.js"><link rel="prefetch" href="/pixel-builder/assets/getting-started.html.3385d296.js"><link rel="prefetch" href="/pixel-builder/assets/index.html.734e3350.js"><link rel="prefetch" href="/pixel-builder/assets/github.html.b0407db2.js"><link rel="prefetch" href="/pixel-builder/assets/vscode.html.cd43b80c.js"><link rel="prefetch" href="/pixel-builder/assets/babylonjs.html.4b5fe100.js"><link rel="prefetch" href="/pixel-builder/assets/minimalist.html.d36b30b8.js"><link rel="prefetch" href="/pixel-builder/assets/pixijs.html.d9e9d59f.js"><link rel="prefetch" href="/pixel-builder/assets/assets.html.991faac9.js"><link rel="prefetch" href="/pixel-builder/assets/building.html.0fcc08d4.js"><link rel="prefetch" href="/pixel-builder/assets/cli.html.b3835719.js"><link rel="prefetch" href="/pixel-builder/assets/structure.html.0480a75b.js"><link rel="prefetch" href="/pixel-builder/assets/styling.html.5c474929.js"><link rel="prefetch" href="/pixel-builder/assets/404.html.d388fcbe.js"><link rel="prefetch" href="/pixel-builder/assets/404.53347b96.js"><link rel="prefetch" href="/pixel-builder/assets/Layout.30740847.js">
    <link rel="stylesheet" href="/pixel-builder/assets/style.a25ec983.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/pixel-builder/" class=""><!----><span class="site-name">Pixel Builder</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/kefniark/pixel-builder" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/kefniark/pixel-builder" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/pixel-builder/getting-started" class="sidebar-item sidebar-heading" aria-label="Getting Started"><!--[--><!--]--> Getting Started <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Templates <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/pixel-builder/template/pixijs" class="sidebar-item" aria-label="2D Pixi.js"><!--[--><!--]--> 2D Pixi.js <!--[--><!--]--></a><!----></li><li><a href="/pixel-builder/template/babylonjs" class="sidebar-item" aria-label="3D BabylonJS"><!--[--><!--]--> 3D BabylonJS <!--[--><!--]--></a><!----></li><li><a href="/pixel-builder/template/minimalist" class="sidebar-item" aria-label="Minimalist (js13k)"><!--[--><!--]--> Minimalist (js13k) <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">Usage <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/pixel-builder/usage/cli" class="sidebar-item" aria-label="Pixel CLI"><!--[--><!--]--> Pixel CLI <!--[--><!--]--></a><!----></li><li><a href="/pixel-builder/usage/structure" class="sidebar-item" aria-label="Project Structure"><!--[--><!--]--> Project Structure <!--[--><!--]--></a><!----></li><li><a href="/pixel-builder/usage/building" class="sidebar-item" aria-label="Build"><!--[--><!--]--> Build <!--[--><!--]--></a><!----></li><li><a href="/pixel-builder/usage/define" class="router-link-active sidebar-item active" aria-label="Define Constant"><!--[--><!--]--> Define Constant <!--[--><!--]--></a><!----></li><li><a href="/pixel-builder/usage/assets" class="sidebar-item" aria-label="Assets Handling"><!--[--><!--]--> Assets Handling <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Features <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/pixel-builder/features/github" class="sidebar-item" aria-label="Github Action"><!--[--><!--]--> Github Action <!--[--><!--]--></a><!----></li><li><a href="/pixel-builder/features/vscode" class="sidebar-item" aria-label="VSCode"><!--[--><!--]--> VSCode <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="define-constant" tabindex="-1"><a class="header-anchor" href="#define-constant" aria-hidden="true">#</a> Define Constant</h1><h2 id="description" tabindex="-1"><a class="header-anchor" href="#description" aria-hidden="true">#</a> Description</h2><p>For development it can be really convenient to have different behaviors, not present in production. This can be really useful for things like version, debug tools, inject variable name, turn on or off some UI.</p><p>So for that, we provide you a way to inject constant at build time.</p><h2 id="usage" tabindex="-1"><a class="header-anchor" href="#usage" aria-hidden="true">#</a> Usage</h2><p>in <code>package.json</code></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>  <span class="token property">&quot;pixel&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;define&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;develop&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// this is for yarn dev</span>
        <span class="token property">&quot;APP_VERSION&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dev&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;APP_DEBUG&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// this is for yarn build or yarn preview</span>
        <span class="token property">&quot;APP_VERSION&quot;</span><span class="token operator">:</span> <span class="token string">&quot;prod&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;APP_DEBUG&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>For typescript, create a file like <code>src/env.d.ts</code> and type those variables</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// define env variable types</span>
<span class="token keyword">declare</span> <span class="token keyword">const</span> <span class="token constant">APP_VERSION</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token keyword">declare</span> <span class="token keyword">const</span> <span class="token constant">APP_DEBUG</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then you are ready to go, now those constant are available everywhere in your app.</p><h2 id="example" tabindex="-1"><a class="header-anchor" href="#example" aria-hidden="true">#</a> Example</h2><h3 id="conditional-import" tabindex="-1"><a class="header-anchor" href="#conditional-import" aria-hidden="true">#</a> Conditional Import</h3><p>To keep the code clean, the debug logic can be managed in separated file then only loaded if needed</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">APP_DEBUG</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;../game/debug&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This also allow to have conditional libraries import, only in development and strip from the build</p><h3 id="string-constants-and-quotes" tabindex="-1"><a class="header-anchor" href="#string-constants-and-quotes" aria-hidden="true">#</a> String Constants (and quotes)</h3><p><strong>Warning</strong>: those constants are not true variables, they are replaced at build time with a string replacement.</p><p>For boolean and numbers this is not a problem, but for string you have to be careful with the lack of quotes.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// this work work</span>
<span class="token keyword">const</span> debug <span class="token operator">=</span> <span class="token constant">APP_DEBUG</span> <span class="token comment">// -&gt; `const debug = true`</span>

<span class="token comment">// those will not work</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Current App is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">APP_VERSION</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token comment">// -&gt; `Current App is ${dev}`</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token constant">APP_VERSION</span> <span class="token comment">// -&gt; `const name = dev`</span>

<span class="token comment">// but those will</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Current App is APP_VERSION&quot;</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; &quot;Current App is dev&quot;</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;APP_VERSION&quot;</span> <span class="token comment">// -&gt; `const name = &quot;dev&quot;`</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Another way to avoid this problem is to put quotes directly in the define value</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>  <span class="token property">&quot;pixel&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;define&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token property">&quot;APP_VERSION&quot;</span><span class="token operator">:</span> <span class="token string">&quot;\&quot;dev\&quot;&quot;</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>And now you can use it as a normal string</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">This is my version : </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">APP_VERSION</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: kevin@destrem.net">Kefniark</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/pixel-builder/assets/app.860be1bc.js" defer></script>
  </body>
</html>
